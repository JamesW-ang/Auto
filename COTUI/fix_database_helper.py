#!/usr/bin/env python3
# -*- coding: utf-8 -*-

mapping = {
    '���ݿ��ļ�·�����������ͬһĿ¼�µ�': '数据库文件路径（放在同一目录下的',
    '�ļ��У�': '文件夹）',
    '���ݿ�·��': '数据库路径',
    '�ļ�����': '文件存在',
    '����ȷ�����ṹ����': '确保表结构存在',
    '���ݿ��ʼ�����': '数据库初始化成功',
    '��ʼ��ʧ��': '初始化失败',
    '��ջ': '堆栈',
    '��ȡ���ݿ�����': '获取数据库连接',
    'ȷ�����б�������': '确保所有表结构存在',
    '������ݿ��ļ������ڣ��ȴ���': '如果数据库文件不存在，先创建',
    '���������ݿ��ļ�': '正在创建数据库文件',
    '���ݿ����ӳɹ�': '数据库连接成功',
    '�������б�': '创建所有表',
    '����Ĭ������': '插入默认数据',
    '���ṹ��֤���': '表结构验证完成',
    'ȷ��������ʧ��': '确保表结构失败',
    '�����û���': '创建用户表',
    '������־��': '创建日志表',
    '����������': '创建告警表',
    '�����������ݱ�': '创建生产数据表',
    '����ϵͳ���ñ�': '创建系统配置表',
    '��ʼ�������ṹ...': '初始化表结构...',
    '���������': '表已创建',
    '����Ĭ���û�': '插入默认用户',
    'ϵͳ����Ա': '系统管理员',
    'Ĭ�Ϲ���Ա�˻�': '默认管理员账户',
    '����Ա': '操作员',
    'Ĭ�ϲ���Ա�˻�': '默认操作员账户',
    '��': '条',
    '����Ĭ���û�ʧ��': '插入默认用户失败',
    '����Ĭ������': '插入默认配置',
    '��־��������': '日志保留天数',
    '���β�ѯ�����־��': '单次查询最大日志数',
    '�Ƿ������Զ�����': '是否启用自动备份',
    'ͼ�񱣴�·��': '图像保存路径',
    'MQTT��������ַ': 'MQTT服务器地址',
    '����Ĭ������ʧ��': '插入默认配置失败',
    'ִ�зǲ�ѯSQL����': '执行非查询SQL语句',
    'ִ�зǲ�ѯSQL����ⲿ���ã�': '执行非查询SQL语句（外部调用）',
    'ִ�в�ѯ�����ص���ֵ': '执行查询并返回单个值',
    'ִ�в�ѯ������ DataTable': '执行查询并返回 DataTable',
    '����������־���������õı���������': '清理旧的日志数据（保留指定的保留天数）',
    '��ȡ��־������������': '获取日志保留天数配置',
    'ɾ��������־': '删除过期日志',
    'ɾ�����ڱ������Ѵ����ģ�': '删除早于保留期限的数据',
    '����������־ʧ��': '清理旧日志失败',
    '�������ݿ�': '备份数据库',
    '�������ݿ�ʧ��': '备份数据库失败',
    '�Ż����ݿ⣨ѹ�����ؽ�������': '优化数据库（压缩和重建索引）',
    '�Ż����ݿ�ʧ��': '优化数据库失败',
}

try:
    with open('./数据库/DatabaseHelper.cs', 'r', encoding='utf-8', errors='ignore') as f:
        content = f.read()
    
    for old, new in mapping.items():
        content = content.replace(old, new)
    
    with open('./数据库/DatabaseHelper.cs', 'w', encoding='utf-8') as f:
        f.write(content)
    
    print("✓ DatabaseHelper.cs 修复完成")
except Exception as e:
    print(f"✗ 修复失败: {e}")
